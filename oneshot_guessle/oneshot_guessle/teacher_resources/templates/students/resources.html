{% extends "base.html" %}
{% load static i18n %}

{% block css %}
    <link rel="stylesheet" href="{% static 'css/guessle.css' %}">
{% endblock %}
{% block content %}
<div class="container d-flex flex-column align-items-center justify-content-between h-100 w-100 navbar navbar-dark bg-dark" aria-label="Dark offcanvas navbar" x-data="{ guess_xmodel: '', guess_1_xmodel:'{{guess_formset.0.guess.value|default_if_none:""}}', guess_2_xmodel:'{{guess_formset.1.guess.value |default_if_none:""}}', guess_3_xmodel:'{{guess_formset.2.guess.value|default_if_none:""}}', guess_4_xmodel:'{{guess_formset.3.guess.value|default_if_none:""}}',guess_5_xmodel:'{{guess_formset.4.guess.value|default_if_none:""}}', guess_6_xmodel:'{{guess_formset.5.guess.value|default_if_none:""}}', attempts_left_xmodel:'{{form.attempts_left.value|default_if_none:0}}', attempt_number_xmodel:'{{form.attempt_number.value|default_if_none:0}}', show_error: false, my_modal:''}">
    <div id="modal_placeholder"></div>
    <div class="container-fluid" style="max-height:100px;overflow:auto;">
        <div class="col-2">
            <!-- Left side icons -->
            <a class="navbar-brand mx-1" href="{% url 'game:home' %}"> <img class="navbar-logo" src="{% static 'images/logo.svg' %}" alt=""> </a>
            <a class="btn btn-link mx-1 px-0 text-danger" hx-get='{% url "game:support" %}' hx-target="#modal_placeholder" hx-trigger="click" @htmx:after-on-load.camel="setTimeout(function() { my_modal=new bootstrap.Modal($refs.modaldiv);my_modal.show()},100)"> <i class="nav-icon bi bi-heart-fill"></i></a>
        </div>
        
        <div class="col-6">
            <!-- Title -->
            <div class="d-flex flex-row justify-content-center text-light">
                <h1 class="text-uppercase">
                    {% if user.is_authenticated %}
                        Hi, {{ user.username }}!
                    {% else %}
                        Hi, stranger!
                    {% endif %}
                </h1>
            </div>
        </div>
        <div class="col-2 d-flex m-0 p-0 flex-row-reverse">
            <!-- Right side icons -->
            <button class="navbar-toggler mx-2" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasNavbarDark" aria-controls="offcanvasNavbarDark" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon nav-icon"></span>
            </button>
            <a class="btn btn-link mx-0 px-0" hx-get='{% url "game:help" %}' hx-target="#modal_placeholder" hx-trigger="click" @htmx:after-on-load.camel="setTimeout(function() { my_modal=new bootstrap.Modal($refs.modaldiv);my_modal.show()},100)"> <i class="nav-icon bi bi-question-circle"></i></a>
            <a class="btn btn-link" hx-get='{% url "game:results" %}' hx-target="#modal_placeholder" hx-trigger="click" @htmx:after-on-load.camel="setTimeout(function() {results_modal=new bootstrap.Modal($refs.resultsdiv);results_modal.show()},100)"><i class="nav-icon bi bi-bar-chart-line-fill" ></i></a>
        </div>
        {% include "navbar.html" %}
    </div>
    <div class="row my-1 align-items-start no-gutters justify-content-center border-bottom w-100">
        <!-- Site title & top bar -->
        {% if not user.is_authenticated or user.no_ads is False %}
            {% include "pages/ads/top_page.html" %}
        {% endif %}
        
    </div>
    

    <form action="{% url 'resource_list' %}" method="get" hx-target="#resource-list" hx-swap="outer">
        <h4>Filters</h4>
        <ul>
            <li>
                <b>Key Stage:</b><br>
                {% for keystage, value in ks_choices %}
                    <input type="checkbox" name="keystage" value="{{ keystage }}" id="{{ keystage }}">
                    <label for="{{ keystage }}">{{ value }}</label><br>
                {% endfor %}
            </li>
            <li>
                <b>Category:</b><br>
                {% for category, value in category_choices %}
                    <input type="checkbox" name="category" value="{{ category }}" id="{{ category }}">
                    <label for="{{ category }}">{{ value }}</label><br>
                {% endfor %}
            </li>
            <li>
                <b>Exam Board:</b><br>
                {% for exam_board, value in exam_b_choices %}
                    <input type="checkbox" name="exam_board" value="{{ exam_board }}" id="{{ exam_board }}">
                    <label for="{{ exam_board }}">{{ value }}</label><br>
                {% endfor %}
            </li>
        </ul>
        <button type="submit">Filter</button>
    </form>

    <div id="resource-list">
        <h2>Resources</h2>
        <ul>
            {% for resource in resources %}
                <li>{{ resource.name }}</li>
            {% endfor %}
        </ul>
    </div>
</div>




{% endblock %}

{% block scripts %}
    
{% endblock %}